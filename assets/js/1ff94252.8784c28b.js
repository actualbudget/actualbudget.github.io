"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3026],{31801:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"config/https","title":"Activating HTTPS","description":"You\'ll need to enable HTTPS on your server in order to safely use all of Actual\'s features. You don\'t need to follow these steps if you run the server on your own computer and only access it through localhost, or if you\'re using a cloud provider that handles HTTPS for you.","source":"@site/docs/config/https.md","sourceDirName":"config","slug":"/config/https","permalink":"/docs/config/https","draft":false,"unlisted":false,"editUrl":"https://github.com/actualbudget/actual/tree/master/packages/docs/docs/config/https.md","tags":[],"version":"current","frontMatter":{"title":"Activating HTTPS"},"sidebar":"docs","previous":{"title":"Configuring the Server","permalink":"/docs/config/"},"next":{"title":"Using a Reverse Proxy","permalink":"/docs/config/reverse-proxies"}}');var o=n(31085),r=n(71184);const s={title:"Activating HTTPS"},c=void 0,a={},l=[{value:"1. Acquire a certificate to use on your server",id:"1-acquire-a-certificate-to-use-on-your-server",level:2},{value:"Use a self-signed certificate",id:"use-a-self-signed-certificate",level:3},{value:"Obtain a certificate without exposing to the internet",id:"obtain-a-certificate-without-exposing-to-the-internet",level:3},{value:"2. Configure Actual to use the certificate",id:"2-configure-actual-to-use-the-certificate",level:2},{value:"Configuring with <code>config.json</code>",id:"configuring-with-configjson",level:3},{value:"Configuring with environment variables",id:"configuring-with-environment-variables",level:3},{value:"Configuring the Desktop App",id:"configuring-the-desktop-app",level:3},{value:"3. Test HTTPS",id:"3-test-https",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["You'll need to enable HTTPS on your server in order to safely use all of Actual's features. ",(0,o.jsx)(t.strong,{children:"You don't need to follow these steps"})," if you run the server on your own computer and only access it through ",(0,o.jsx)(t.code,{children:"localhost"}),", or if you're using a cloud provider that handles HTTPS for you."]}),"\n",(0,o.jsx)(t.h2,{id:"1-acquire-a-certificate-to-use-on-your-server",children:"1. Acquire a certificate to use on your server"}),"\n",(0,o.jsxs)(t.p,{children:["There are two methods to do this and both refer to not exposing Actual on the internet. If access from the internet is desired, refer to ",(0,o.jsx)(t.a,{href:"/docs/config/reverse-proxies",children:"Using a Reverse Proxy"}),"."]}),"\n",(0,o.jsx)(t.h3,{id:"use-a-self-signed-certificate",children:"Use a self-signed certificate"}),"\n",(0,o.jsx)(t.p,{children:"Use a self-signed certificate. This is the easiest way to get HTTPS working, but it will cause your browser to display a warning that the certificate is invalid. Additionally, if anyone gets access to this certificate, they can intercept most secure traffic on your computer."}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["A command line tool like ",(0,o.jsx)(t.a,{href:"https://github.com/FiloSottile/mkcert",children:"mkcert"})," can automate this process."]}),"\n",(0,o.jsxs)(t.li,{children:["Alternately, you can manually generate the certificates. Install OpenSSL for your operating system, then run ",(0,o.jsx)(t.code,{children:"openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout selfhost.key -out selfhost.crt"})," in a terminal to generate the certificate and private key. You'll need to enter a two-letter country code to get the ",(0,o.jsx)(t.code,{children:".crt"})," file to be generated, but you can leave the rest of the fields blank (just hit enter at each prompt). Move the ",(0,o.jsx)(t.code,{children:"selfhost.key"})," and ",(0,o.jsx)(t.code,{children:"selfhost.crt"})," files to a location accessible to the Actual server."]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"obtain-a-certificate-without-exposing-to-the-internet",children:"Obtain a certificate without exposing to the internet"}),"\n",(0,o.jsxs)(t.p,{children:["Use a service like ",(0,o.jsx)(t.a,{href:"https://tailscale.com/kb/1153/enabling-https/",children:"Tailscale"})," or ",(0,o.jsx)(t.a,{href:"https://caddyserver.com/docs/automatic-https#dns-challenge",children:"Caddy"})," that allows you to create a valid HTTPS certificate without having to expose your server to the wider internet."]}),"\n",(0,o.jsx)(t.h2,{id:"2-configure-actual-to-use-the-certificate",children:"2. Configure Actual to use the certificate"}),"\n",(0,o.jsx)(t.p,{children:"Once you have the certificate, you'll need to configure Actual to use it. There are two methods to do this:"}),"\n",(0,o.jsxs)(t.h3,{id:"configuring-with-configjson",children:["Configuring with ",(0,o.jsx)(t.code,{children:"config.json"})]}),"\n",(0,o.jsxs)(t.p,{children:["Create a ",(0,o.jsx)(t.code,{children:"config.json"})," file in the same folder where you run the Actual Sync Server. If you are ",(0,o.jsx)(t.a,{href:"/docs/install/build-from-source",children:"building from source"})," this will be in ",(0,o.jsx)(t.code,{children:"packages/sync-server/"}),". Put the paths to the ",(0,o.jsx)(t.code,{children:".key"})," and ",(0,o.jsx)(t.code,{children:".crt"})," files in the config file. Note: if you're using Docker or a similar container environment, make sure the paths are accessible to the container."]}),"\n",(0,o.jsxs)(t.p,{children:["If using a Docker container, this folder is ",(0,o.jsx)(t.code,{children:"/data"})," within the container. If you mounted a volume for the container, the folder on the host where ",(0,o.jsx)(t.code,{children:"/data"})," is mounted is where you can place the ",(0,o.jsx)(t.code,{children:"config.json"})," file."]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"config.json"}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{\n  "https": {\n    "key": "/data/selfhost.key",\n    "cert": "/data/selfhost.crt"\n  }\n}\n'})}),"\n",(0,o.jsxs)(t.p,{children:["If using MacOS/*nix based systems\nin terminal paste the following. This will create the ",(0,o.jsx)(t.code,{children:"config.json"})," in the current directory"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-zsh",children:'cat <<"EOF" | tee config.json\n{\n  "https": {\n    "key": "/data/selfhost.key",\n    "cert": "/data/selfhost.crt"\n  }\n}\nEOF\n'})}),"\n",(0,o.jsx)(t.h3,{id:"configuring-with-environment-variables",children:"Configuring with environment variables"}),"\n",(0,o.jsxs)(t.p,{children:["If you can't easily create new files, you can also configure HTTPS using environment variables. Set the ",(0,o.jsx)(t.code,{children:"ACTUAL_HTTPS_KEY"})," and ",(0,o.jsx)(t.code,{children:"ACTUAL_HTTPS_CERT"})," environment variables to the contents of the ",(0,o.jsx)(t.code,{children:".key"})," and ",(0,o.jsx)(t.code,{children:".crt"})," files, respectively. If you're unable to include newlines in the environment variable values, you can replace any newlines with ",(0,o.jsx)(t.code,{children:"\\n"})," and Actual will automatically convert them back to newlines."]}),"\n",(0,o.jsx)(t.h3,{id:"configuring-the-desktop-app",children:"Configuring the Desktop App"}),"\n",(0,o.jsxs)(t.p,{children:["To configure the desktop app, follow these steps on the ",(0,o.jsx)(t.em,{children:"Where's the server?"})," screen."]}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Enter your server URL and click OK."}),"\n",(0,o.jsx)(t.li,{children:"If you see an error message asking you to select your certificate, choose the appropriate certificate and try again."}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"Note:"})," If you have generated your certificate using ",(0,o.jsx)(t.a,{href:"https://github.com/FiloSottile/mkcert",children:"mkcert"}),", specify the root CA certificate - not the certificate your server is pointing to. To do this:"]}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["Run the command ",(0,o.jsx)(t.code,{children:"mkcert -CAROOT"})," to find the directory of the root certificate."]}),"\n",(0,o.jsxs)(t.li,{children:["Navigate to that directory to locate the ",(0,o.jsx)(t.code,{children:"rootCA.pem"})," certificate"]}),"\n",(0,o.jsxs)(t.li,{children:["Specify the ",(0,o.jsx)(t.code,{children:"rootCA.pem"})," certificate in the desktop app."]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"3-test-https",children:"3. Test HTTPS"}),"\n",(0,o.jsxs)(t.p,{children:["Once you have acquired a certificate and configured Actual to use it, attempt to access your instance ensuring you are using ",(0,o.jsx)(t.code,{children:"https"}),". It is recommended to also either re-enter the URL to your server or make a new tab/window instead of refreshing the page where you saw the error."]})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},71184:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var i=n(14041);const o={},r=i.createContext(o);function s(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);