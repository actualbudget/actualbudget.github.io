"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[4033],{28953:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"contributing/releasing","title":"How to Cut a Release","description":"In the open-source version of Actual, there are 3 NPM packages:","source":"@site/docs/contributing/releasing.md","sourceDirName":"contributing","slug":"/contributing/releasing","permalink":"/docs/contributing/releasing","draft":false,"unlisted":false,"editUrl":"https://github.com/actualbudget/actual/tree/master/packages/docs/docs/contributing/releasing.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Preview Builds","permalink":"/docs/contributing/preview-builds"},"next":{"title":"Building on Windows","permalink":"/docs/contributing/windows"}}');var i=s(31085),n=s(71184);const l={},r="How to Cut a Release",c={},o=[{value:"Versioning Strategy",id:"versioning-strategy",level:3},{value:"Set up the PR",id:"set-up-the-pr",level:2},{value:"Code",id:"code",level:3},{value:"Docs",id:"docs",level:3},{value:"Await approval of the Release PR",id:"await-approval-of-the-release-pr",level:2},{value:"Trigger the release pipeline",id:"trigger-the-release-pipeline",level:2},{value:"Finalize the release",id:"finalize-the-release",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"how-to-cut-a-release",children:"How to Cut a Release"})}),"\n",(0,i.jsx)(t.p,{children:"In the open-source version of Actual, there are 3 NPM packages:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsxs)(t.a,{href:"https://www.npmjs.com/package/@actual-app/api",children:[(0,i.jsx)(t.a,{href:"https://github.com/actual-app",children:"actual-app"}),"/api"]}),": The API for the underlying functionality. This includes the entire backend of Actual, meant to be used with Node."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsxs)(t.a,{href:"https://www.npmjs.com/package/@actual-app/web",children:[(0,i.jsx)(t.a,{href:"https://github.com/actual-app",children:"actual-app"}),"/web"]}),": A web build that will serve the app with a web frontend. This includes both the frontend and backend of Actual. It includes the backend as well because it's built to be used as a Web Worker."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsxs)(t.a,{href:"https://www.npmjs.com/package/@actual-app/sync-server",children:[(0,i.jsx)(t.a,{href:"https://github.com/actual-app",children:"actual-app"}),"/sync-server"]}),": The entire sync-server and underlying web client in one package. This includes a CLI tool, meant to be used with Node."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"All packages and the main Actual release are versioned together. That makes it clear which version of the package should be used with the version of Actual."}),"\n",(0,i.jsx)(t.h3,{id:"versioning-strategy",children:"Versioning Strategy"}),"\n",(0,i.jsxs)(t.p,{children:["We used to version according to the date when the release was made. For example: if a release was cut on 02-10-2022, then the release number was ",(0,i.jsx)(t.code,{children:"22.10.2"}),". This posed some challenges if critical bugs were spotted after the release. It meant we had to wait for the next day to cut a new release."]}),"\n",(0,i.jsxs)(t.p,{children:["Starting from ",(0,i.jsx)(t.code,{children:"v23.3.x"})," we changed how we version Actual while keeping the core philosophy the same. The new versioning strategy is: include the year and month of the release in the version number. But for minor version numbers: start at ",(0,i.jsx)(t.code,{children:"0"})," and increment by +1 for each subsequent bug-fix release."]}),"\n",(0,i.jsx)(t.p,{children:"For example:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"v23.3.0"})," - first release launched on 15th of March, 2023;"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"v23.3.1"})," - critical bugfix launched on the same date;"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"v23.3.2"})," - another bugfix launched later in the month of March;"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"v23.4.0"})," - first release launched on 9th of April, 2023;"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"set-up-the-pr",children:"Set up the PR"}),"\n",(0,i.jsx)(t.h3,{id:"code",children:"Code"}),"\n",(0,i.jsxs)(t.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Run ",(0,i.jsx)(t.a,{href:"https://github.com/actualbudget/actual/actions/workflows/generate-release-pr.yml",children:"this GitHub Action"})," to generate a release PR (for a regular monthly release, leave the arguments set to their default values)."]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Open the generated PR and ensure the release notes workflow has started to collate the release notes into a comment in the PR. You may need to push an empty commit in order to trigger CI."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"docs",children:"Docs"}),"\n",(0,i.jsxs)(t.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Open the release PR ",(0,i.jsx)(t.code,{children:"release/vYY.MM.xx"})]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","After the release notes workflows in the PR has been run, copy the collated notes into a new blog post using a previous release as a template. The release notes will also need adding to the ",(0,i.jsx)(t.code,{children:"docs/releases.md"})," file."]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Fix spelling as needed."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"await-approval-of-the-release-pr",children:"Await approval of the Release PR"}),"\n",(0,i.jsxs)(t.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Remove ",(0,i.jsx)(t.code,{children:"[WIP]"})," from the PR title to mark it as ready for review, and share in the release channel on Discord."]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Wait until at least 2 other maintainers have approved the release before merging the release PR."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"trigger-the-release-pipeline",children:"Trigger the release pipeline"}),"\n",(0,i.jsxs)(t.p,{children:["Once the release PRs have been merged, the commit in ",(0,i.jsx)(t.code,{children:"actual"})," needs to be tagged. When the tag is pushed, it will trigger the Docker stable image, all NPM package and the Desktop app to be built and published."]}),"\n",(0,i.jsxs)(t.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Run the below in the ",(0,i.jsx)(t.code,{children:"actual"})," repository, or use the GitHub UI.","\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"git tag vX.Y.Z\ngit push vX.Y.Z\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"All NPM packages should be automatically released and pushed to the NPM registry. Check them here:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsxs)(t.a,{href:"https://www.npmjs.com/package/@actual-app/api",children:[(0,i.jsx)(t.a,{href:"https://github.com/actual-app",children:"actual-app"}),"/api"]})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsxs)(t.a,{href:"https://www.npmjs.com/package/@actual-app/web",children:[(0,i.jsx)(t.a,{href:"https://github.com/actual-app",children:"actual-app"}),"/web"]})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsxs)(t.a,{href:"https://www.npmjs.com/package/@actual-app/sync-server",children:[(0,i.jsx)(t.a,{href:"https://github.com/actual-app",children:"actual-app"}),"/sync-server"]})}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["For the Windows Store desktop app, a submission will be automatically uploaded and submitted for certification. The certification process can take up to 3 business days; once complete the app will be in the Store. You can check the update status ",(0,i.jsx)(t.a,{href:"https://partner.microsoft.com/en-us/dashboard",children:"here"})," if you have permission. Note that the Store UI will not correctly reflect the submission status for about 30 minutes after submission."]}),"\n",(0,i.jsxs)(t.p,{children:["For the Flathub desktop app, a PR will be created against the ",(0,i.jsx)(t.a,{href:"https://github.com/flathub/com.actualbudget.actual/pulls",children:"Actual Flathub Repository"})," and the core maintainers will be assigned as reviewers. Once created, a Flatpak Build will be kicked off and will validated the release. Once successful, the Core team will review the PR and merge it to ",(0,i.jsx)(t.code,{children:"master"}),", which will kick off a production release to the Flathub Store. It can take anywhere from hours to a few days before the app will be available in the Flathub Store."]}),"\n",(0,i.jsxs)(t.p,{children:["Finally, a draft GitHub release should be automatically created ",(0,i.jsx)(t.a,{href:"https://github.com/actualbudget/actual/releases",children:"here"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"finalize-the-release",children:"Finalize the release"}),"\n",(0,i.jsxs)(t.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Approve and merge the ",(0,i.jsx)(t.a,{href:"https://github.com/flathub/com.actualbudget.actual/pulls",children:"Flathub Release PR"})," to master."]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","After the Docker image for the release is ready and pushed to Docker Hub, remember to deploy it and do a quick smoke test to verify things still work as expected."]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Un-draft the GitHub release which will send announcement notifications to all apps."]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Wrap up by sending an announcement on Discord and Twitter."]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Wait one to two days to see if any new bugs show up that need a patch release. If none show up, end the merge freeze."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"\ud83c\udf89"})]})}function d(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},71184:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>r});var a=s(14041);const i={},n=a.createContext(i);function l(e){const t=a.useContext(n);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);