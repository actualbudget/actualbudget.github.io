"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[9666],{17283:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/restore-import-file-ac4e6378584912b475ba6a13f1eb8c64.png"},38091:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"backup-restore/restore","title":"Restoring Backups","description":"Restoring a Manual Backup","source":"@site/docs/backup-restore/restore.md","sourceDirName":"backup-restore","slug":"/backup-restore/restore","permalink":"/docs/backup-restore/restore","draft":false,"unlisted":false,"editUrl":"https://github.com/actualbudget/actual/tree/master/packages/docs/docs/backup-restore/restore.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Backing up Your Actual Budget","permalink":"/docs/backup-restore/backup"},"next":{"title":"Settings","permalink":"/docs/settings/"}}');var i=n(31085),o=n(71184);const a={},r="Restoring Backups",c={},l=[{value:"Restoring a Manual Backup",id:"restoring-a-manual-backup",level:2},{value:"Steps to Restore a Backup:",id:"steps-to-restore-a-backup",level:3},{value:"Errors When Restoring Database From Backup",id:"errors-when-restoring-database-from-backup",level:2},{value:"Automatic Backups",id:"automatic-backups",level:2},{value:"Loading an Automatic Backup",id:"loading-an-automatic-backup",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"restoring-backups",children:"Restoring Backups"})}),"\n",(0,i.jsx)(t.h2,{id:"restoring-a-manual-backup",children:"Restoring a Manual Backup"}),"\n",(0,i.jsxs)(t.p,{children:["If you previously followed the ",(0,i.jsx)(t.a,{href:"/docs/backup-restore/backup",children:"steps"})," to back up your data and have an Actual\nzip export, you can restore this backup by importing it using the Import File button in the Switch File page."]}),"\n",(0,i.jsx)(t.h3,{id:"steps-to-restore-a-backup",children:"Steps to Restore a Backup:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Close your current budget by clicking on the budget name in the top left\ncorner of the screen and choosing the option to close the budget file."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Close the current budget file",src:n(63247).A+"",width:"1073",height:"602"})}),"\n",(0,i.jsxs)(t.ol,{start:"2",children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["In the ",(0,i.jsx)(t.em,{children:"Budget Selection Screen"}),", or File Screen that appears, click on ",(0,i.jsx)(t.em,{children:"Import file"}),"."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Click on the import file link",src:n(17283).A+"",width:"568",height:"263"})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Choose the ",(0,i.jsx)(t.em,{children:"Actual"})," option."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Click on the import file link",src:n(46730).A+"",width:"542",height:"327"})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Then click on the ",(0,i.jsx)(t.em,{children:"Select file..."})," button."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Click on the import file link",src:n(79987).A+"",width:"602",height:"396"})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Navigate to the location of where you stored your backup file, select it and click\non the ",(0,i.jsx)(t.em,{children:"upload button"}),"."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Click on the import file link",src:n(68610).A+"",width:"827",height:"360"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"That is it. The backup is now restored. If the imported budget is a copy\nof your current budget, you may want to rename the import by clicking on its name\nand rename it. Once you verify the new imported budget is correct, you can\nnavigate back to the budget selection screen by closing the current budget\nand deleting the old copy."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Click on the import file link",src:n(78627).A+"",width:"1073",height:"602"})}),"\n",(0,i.jsx)(t.h2,{id:"errors-when-restoring-database-from-backup",children:"Errors When Restoring Database From Backup"}),"\n",(0,i.jsx)(t.p,{children:"You may encounter an error during restoration that says:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"This budget cannot be loaded with this version of the app. Make sure the app is up-to-date."})}),"\n",(0,i.jsxs)(t.p,{children:["This should only happen when you upgrade from a Docker image with the ",(0,i.jsx)(t.code,{children:"edge"})," tag to a stable release, such as ",(0,i.jsx)(t.code,{children:"latest"}),". It should not happen in other instances. If you see this bug, please submit a bug report."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"IMPORTANT NOTE"}),": You ",(0,i.jsx)(t.em,{children:"MUST"})," download a backup of each of your budgets using the process outlined above ",(0,i.jsx)(t.strong,{children:"before"})," continuing. It's always good practice to backup your data before upgrading to a new version."]}),"\n",(0,i.jsx)(t.p,{children:"The fix for this is to migrate your SQLite database in the steps outlined below manually:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Download and install ",(0,i.jsx)(t.a,{href:"https://sqlitebrowser.org/",children:"SQLite Browser"})]}),"\n",(0,i.jsxs)(t.li,{children:["Unzip the backup budget ",(0,i.jsx)(t.code,{children:".zip"})," file. The filename should look like: ",(0,i.jsx)(t.code,{children:"yyyy-mm-dd-My-Finances-abcd1234.zip"})]}),"\n",(0,i.jsxs)(t.li,{children:['Open SQLite Browser. Click on the "Open Database" button and navigate to the file you just unzipped. You\'re looking for a file named ',(0,i.jsx)(t.code,{children:"db.sqlite"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Load the file and click on the ",(0,i.jsx)(t.code,{children:"Browse Data"})," tab. Select the ",(0,i.jsx)(t.code,{children:"__migrations__"})," table from the table dropdown menu."]}),"\n",(0,i.jsxs)(t.li,{children:["You should see a list of integers under the' id' column. Cross-reference the entries in this table with the list of ",(0,i.jsx)(t.a,{href:"https://github.com/actualbudget/actual/tree/master/packages/loot-core/migrations",children:"database migrations"})," in the main Actual repository."]}),"\n",(0,i.jsxs)(t.li,{children:["For every integer that's missing, click on the ",(0,i.jsx)(t.code,{children:".sql"})," file associated with it and copy the raw data."]}),"\n",(0,i.jsx)(t.li,{children:"Run the SQL query in the Execute tab of SQLite Browser. Be sure to check the output that the command was successful."}),"\n",(0,i.jsxs)(t.li,{children:["If the SQL query that you copied is successful, you'll want to insert the migration command's id into the ",(0,i.jsx)(t.code,{children:"__migrations__"})," table by executing ",(0,i.jsx)(t.code,{children:"insert into __migrations__ values(id_of_missing_migration_command);"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Once your ",(0,i.jsx)(t.code,{children:"__migrations__"})," table matches the database migrations folder, commit and close the database."]}),"\n",(0,i.jsxs)(t.li,{children:["Rezip your modified ",(0,i.jsx)(t.code,{children:"db.sqlite"})," and ",(0,i.jsx)(t.code,{children:"metadata.json"})," files into a zip file."]}),"\n",(0,i.jsx)(t.li,{children:"Retry the restore process outlined above."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"automatic-backups",children:"Automatic Backups"}),"\n",(0,i.jsx)(t.admonition,{type:"caution",children:(0,i.jsx)(t.p,{children:"Automatic backups are currently only available in the desktop app."})}),"\n",(0,i.jsx)(t.p,{children:"Actual keeps backups of your data locally. If something disastrous happens, you can always load a recent backup to regain your data."}),"\n",(0,i.jsxs)(t.p,{children:["Currently, it keeps up to 10 backups, one for each you used the app, and multiple backups of the current day. The result is you will have data backed up ",(0,i.jsx)(t.strong,{children:"up to the last 15 minutes"}),", in addition to the previous 10 days you used the app."]}),"\n",(0,i.jsx)(t.h3,{id:"loading-an-automatic-backup",children:"Loading an Automatic Backup"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Select the ",(0,i.jsx)(t.strong,{children:"File > Load Backup\u2026"})," menu item"]}),"\n",(0,i.jsx)(t.li,{children:"Choose the backup you want to load and select it"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["The app will reload with the data from that backup. If you want to keep using that backup, you don't have to do anything else; keep using the app. If you wish to return to the previous data, reopen the backup menu and select ",(0,i.jsx)(t.strong,{children:"Revert to original version"}),". This option will be available until another backup is made."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},46730:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/restore-import-file-dialog-b5d6b804c2c6dfc0964a3a25c321bc51.png"},63247:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/restore-close-budget-6c00e949c977de1023e25c7db1d10e95.png"},68610:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/restore-import-file-choose-file-a30aa438b56805c03f149fe90f66d208.png"},71184:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var s=n(14041);const i={},o=s.createContext(i);function a(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:t},e.children)}},78627:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/restore-import-imported-budget-ff08141c59eed442e54c1a14f315cd9b.png"},79987:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/restore-import-file-select-file-cab9ff629d0833613e281da500e17408.png"}}]);