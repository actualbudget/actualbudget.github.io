"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2863],{62406:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"budgeting/rules/index","title":"Rules","description":"Rules determine how a transaction is processed. When importing or syncing transactions, they are run through a list of rules that can apply actions to the transaction. For example, a rule could process a transaction with the payee AMAZON.COM*5C7QC7MH0 AM 10/26 PURCHASE AMZN.COM/BILL, and because it contains the word \\"amazon\\", it could set the payee to \\"Amazon\\" and the category to \\"my fun stuff\\". Rules allow you to automate any workflow you want.","source":"@site/docs/budgeting/rules/index.md","sourceDirName":"budgeting/rules","slug":"/budgeting/rules/","permalink":"/docs/budgeting/rules/","draft":false,"unlisted":false,"editUrl":"https://github.com/actualbudget/actual/tree/master/packages/docs/docs/budgeting/rules/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Transfers","permalink":"/docs/transactions/transfers"},"next":{"title":"Rules Examples","permalink":"/docs/budgeting/rules/custom"}}');var o=a(31085),i=a(71184);const s={},l="Rules",r={},c=[{value:"How the Rules Work",id:"how-the-rules-work",level:2},{value:"Condition Types",id:"condition-types",level:3},{value:"Fields",id:"fields",level:3},{value:"Automatic Rules",id:"automatic-rules",level:2},{value:"Managing Rules",id:"managing-rules",level:2},{value:"Creating a Rule",id:"creating-a-rule",level:3},{value:"Editing a Rule",id:"editing-a-rule",level:3},{value:"Deleting a Rule",id:"deleting-a-rule",level:3},{value:"Viewing Rules for a Payee",id:"viewing-rules-for-a-payee",level:3},{value:"Disabling Payee(s) Automatic Rule Creation",id:"disabling-payees-automatic-rule-creation",level:3},{value:"Disabling All Automatic Rule Creation",id:"disabling-all-automatic-rule-creation",level:3},{value:"Using the Rule Editor for Sophisticated Batch Editing",id:"using-the-rule-editor-for-sophisticated-batch-editing",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"rules",children:"Rules"})}),"\n",(0,o.jsxs)(t.p,{children:["Rules determine how a transaction is processed. When importing or syncing transactions, they are run through a list of rules that can apply actions to the transaction. For example, a rule could process a transaction with the payee ",(0,o.jsx)(t.code,{children:"AMAZON.COM*5C7QC7MH0 AM 10/26 PURCHASE AMZN.COM/BILL"}),', and because it contains the word "amazon", it could set the payee to "Amazon" and the category to "my fun stuff". Rules allow you to automate any workflow you want.']}),"\n",(0,o.jsx)(t.p,{children:'Cleaning up payees is a common use case of rules since they are ugly much of the time. But rules can do anything: they can set the "notes" field, create a transfer, and more. If you want to be super detailed, you can create all kinds of rules to automate your process away.'}),"\n",(0,o.jsxs)(t.p,{children:["Here's the best part: you might never need to touch rules. Actual will ",(0,o.jsx)(t.strong,{children:"automatically create rules for you"}),' based on your behavior. As you rename payees or categorize transactions, it will use rules as a mechanism for writing down what you\'ve done so it will automatically happen later. For example, if you categorize the payee "Kroger" as "Food" a couple times, it will create a rule to automatically apply that category on import. As you use Actual more, your data will automatically get cleaned up for you based on your previous behavior.']}),"\n",(0,o.jsx)(t.p,{children:"Eventually, you can just import transactions and quickly see your spending without having to do a lot of repetitive work to get up-to-date."}),"\n",(0,o.jsx)(t.p,{children:"The second best part is because you ultimately own the rules, you are free to go in and change the rules that Actual made for you. We'll show you how this works in more detail below."}),"\n",(0,o.jsx)(t.h2,{id:"how-the-rules-work",children:"How the Rules Work"}),"\n",(0,o.jsxs)(t.p,{children:["You can view all the rules by going to ",(0,o.jsx)(t.strong,{children:"More"})," and then ",(0,o.jsx)(t.strong,{children:"Rules"})," in the Sidebar."]}),"\n",(0,o.jsxs)(t.p,{children:["When a transaction is imported, it runs against all of the rules ",(0,o.jsx)(t.strong,{children:"in the order that you see them"}),". If all of the conditions of a rule matches (the left side), then all of the actions are run (the right side). The transaction is changed, and then it continues running the rest of the rules. Each rule is always only run once. At the end, the transaction will be updated with changes from all matching rules."]}),"\n",(0,o.jsx)(t.p,{children:"If there is a conflict, for example if two rules set the category, the rule that runs last will always win out."}),"\n",(0,o.jsxs)(t.p,{children:["Rules are ",(0,o.jsx)(t.strong,{children:"automatically ranked"})," from least to most specific. If the conditions of one rule apply broadly, while the conditions of another are more specific, the latter will always run ",(0,o.jsx)(t.em,{children:"after"})," the former so its changes always win out. This means you can make a broad rule like \"if a transaction's payee ",(0,o.jsx)(t.em,{children:"contains"})," 'cat' set the category to 'pets'\", and then fix a mismatched transaction with another rule that says \"if the payee ",(0,o.jsx)(t.em,{children:"is"})," 'catan' set the category to 'games'\". An \"is\" condition always ranks higher than \"contains\". Generally, you don't need to worry about this and it should work like you expect."]}),"\n",(0,o.jsxs)(t.p,{children:['While ranking works for the most part, you might want to say "this rule ',(0,o.jsx)(t.em,{children:"always"}),' should run last no matter what". Actual allows this with ',(0,o.jsx)(t.strong,{children:"stages"}),". Rules are actually run in 3 stages: ",(0,o.jsx)(t.code,{children:"pre"}),", ",(0,o.jsx)(t.code,{children:"default"}),", and ",(0,o.jsx)(t.code,{children:"post"}),". By tagging a rule as ",(0,o.jsx)(t.code,{children:"pre"})," or ",(0,o.jsx)(t.code,{children:"post"}),", you force it to always run before or after rules in the other stages. Within a stage, rules are still automatically ranked."]}),"\n",(0,o.jsx)(t.h3,{id:"condition-types",children:"Condition Types"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"is"}),"/",(0,o.jsx)(t.code,{children:"is not"})," matches exactly"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"contains"}),"/",(0,o.jsx)(t.code,{children:"does not contain"})," matches a substring"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"matches"})," is a ",(0,o.jsx)(t.a,{href:"https://regextutorial.org/",children:"regular expressions"})]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"one of"}),"/",(0,o.jsx)(t.code,{children:"not one of"})," is a multi-select"]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"fields",children:"Fields"}),"\n",(0,o.jsx)(t.p,{children:"Conditions can use the following fields:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"imported payee"}),"\n",(0,o.jsx)(t.li,{children:"payee"}),"\n",(0,o.jsx)(t.li,{children:"account"}),"\n",(0,o.jsx)(t.li,{children:"category"}),"\n",(0,o.jsx)(t.li,{children:"date"}),"\n",(0,o.jsx)(t.li,{children:"notes"}),"\n",(0,o.jsx)(t.li,{children:"amount"}),"\n",(0,o.jsx)(t.li,{children:"amount (inflow)"}),"\n",(0,o.jsx)(t.li,{children:"amount (outflow)"}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"imported payee"})," is different from ",(0,o.jsx)(t.code,{children:"payee"})," in that it is ",(0,o.jsx)(t.em,{children:"always"})," the original text of the payee or description field when the transaction was imported. ",(0,o.jsx)(t.code,{children:"payee"})," references a payee in Actual. This matters because it allows you to rename a payee before it is created in Actual. You can have several rules that all check ",(0,o.jsx)(t.code,{children:"imported payee"})," and set the payee to something without worrying about them stepping on each other. (Conditions can't reliably check ",(0,o.jsx)(t.code,{children:"payee"})," if previous rules changed it)"]}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"inflow"})," and ",(0,o.jsx)(t.code,{children:"outflow"})," versions of ",(0,o.jsx)(t.code,{children:"amount"})," make it easier to work with amounts. If you only want to match expenses between 5 and 10 dollars, use ",(0,o.jsx)(t.code,{children:"amount (outflow)"})," because that money is leaving the account. If you use ",(0,o.jsx)(t.code,{children:"amount"}),", you'd have to use negative numbers and it's simply less convenient."]}),"\n",(0,o.jsxs)(t.p,{children:["All strings are matched case-insensitive. An ",(0,o.jsx)(t.code,{children:"imported payee"}),' of "PuBlix" will match a condition that is "contains \'publix\'".']}),"\n",(0,o.jsx)(t.p,{children:"Actions can set the following fields:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"category"}),"\n",(0,o.jsx)(t.li,{children:"payee"}),"\n",(0,o.jsx)(t.li,{children:"notes"}),"\n",(0,o.jsx)(t.li,{children:"cleared"}),"\n",(0,o.jsx)(t.li,{children:"account"}),"\n",(0,o.jsx)(t.li,{children:"date"}),"\n",(0,o.jsx)(t.li,{children:"amount"}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["Actions can also prepend or append text to the ",(0,o.jsx)(t.code,{children:"notes"})," field."]}),"\n",(0,o.jsx)(t.h2,{id:"automatic-rules",children:"Automatic Rules"}),"\n",(0,o.jsx)(t.p,{children:"Right now, there are two types of rules that Actual will automatically create or update for you: renaming payees and categorizing transactions."}),"\n",(0,o.jsxs)(t.p,{children:["When you change the payee of a transaction and the previous one is no longer used anywhere, Actual will ask you if you want to automatically apply that rename in the future. This creates a nice flow for cleaning up transactions: you can import transactions with ugly payees like ",(0,o.jsx)(t.code,{children:"AMAZON.COM*5C7QC7MH0 AM 10/26 PURCHASE AMZN.COM/BILL"}),", and then change the payee in the transactions list. Actual will ask you if you want to do that in the future, and if you click yes, that payee will automatically be cleaned up in the future."]}),"\n",(0,o.jsx)(t.p,{children:'You can also select the "edit" option to the right of the rule. Actual will take you to the rule that it created for the rename, and you can change it however you like. For the above payee, you probably want to change the condition to "contains \'amazon\'" so all amazon payees are cleaned up.'}),"\n",(0,o.jsxs)(t.p,{children:["Payee renaming rules that Actual creates are always in the ",(0,o.jsx)(t.code,{children:"pre"})," stage, so they always run first."]}),"\n",(0,o.jsx)(t.p,{children:"Actual also creates/updates rules for categorizing transactions. When you categorize a transaction, it will determine the best category for a transaction (basically the most common one) and create a rule that sets the category for the payee. If a rule already exists for the payee, it updates the category to set."}),"\n",(0,o.jsx)(t.p,{children:"Over time, most categories should automatically get set for you which reduces a lot of tedious work."}),"\n",(0,o.jsxs)(t.p,{children:["Categorizing rules are always created in the default stage. Since payee renaming rules are ",(0,o.jsx)(t.code,{children:"pre"}),", they always run before categorizing no matter what. In this case, we don't want them automatically ranked because we always want the payee to be set before running the category rules."]}),"\n",(0,o.jsx)(t.p,{children:"Of course, you are free to edit the rules as you like. Change the category set for a payee, or tweak the renaming rules. Actual is there to help, but ultimately you are in control."}),"\n",(0,o.jsxs)(t.p,{children:["If Actual is doing something that you simply don't like, create a ",(0,o.jsx)(t.code,{children:"post"})," rule to force it to run after everything else. You could even turn off auto-categorizing altogether by create a ",(0,o.jsx)(t.code,{children:"post"})," rule that matches a ",(0,o.jsx)(t.code,{children:"date"})," of today or later (so all transactions would match) and sets the category to ",(0,o.jsx)(t.code,{children:"null"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"managing-rules",children:"Managing Rules"}),"\n",(0,o.jsx)(t.h3,{id:"creating-a-rule",children:"Creating a Rule"}),"\n",(0,o.jsx)(t.p,{children:'To create a rule, go to More > Rules\u2026 to view all the rules and click "Create new rule" in the bottom-right. You will now be editing a new rule.'}),"\n",(0,o.jsx)(t.h3,{id:"editing-a-rule",children:"Editing a Rule"}),"\n",(0,o.jsx)(t.p,{children:'When viewing a list of rules, click the "edit" button on the right to edit a rule. The "edit rule" screen lists all the conditions and actions in an editable format. You can add/remove actions and conditions, change operators or values, and more.'}),"\n",(0,o.jsx)(t.p,{children:"This screen also lists all the transactions that currently match the conditions. This gives you great feedback to see if your conditions are working the way you expect."}),"\n",(0,o.jsx)(t.p,{children:'You can even manually apply all the actions to the transactions. You need to select the transactions from the list that you want to change (clicking in the header will select all of them) and click "Apply actions". This helps if you want the rule to apply to some existing transactions as well.'}),"\n",(0,o.jsx)(t.h3,{id:"deleting-a-rule",children:"Deleting a Rule"}),"\n",(0,o.jsx)(t.p,{children:'To delete a rule (or rules), select the ones you want to delete. Then go down to the bottom right of the window and click the "Delete # rules" button.'}),"\n",(0,o.jsx)(t.h3,{id:"viewing-rules-for-a-payee",children:"Viewing Rules for a Payee"}),"\n",(0,o.jsx)(t.p,{children:'To view the list of rules that apply to a specific payee, go to More > Payees\u2026 to view the list of payees. This table shows you which payees have rules associated with them, and you can click "# associated rules" to view the rules just for that payee.'}),"\n",(0,o.jsx)(t.h3,{id:"disabling-payees-automatic-rule-creation",children:"Disabling Payee(s) Automatic Rule Creation"}),"\n",(0,o.jsx)(t.p,{children:'To disable automatic rule creation for a payee, go to More > Payees\u2026 right-click on the payee you would like to disable automatic rule creation for and click "Disable learning". You will see a red icon indicating learning is disabled for the payee.'}),"\n",(0,o.jsx)(t.p,{children:'To disable automatic rule creation for multiple payees, go to More > Payees\u2026 and select the payees by placing a checkmark on the left of each payee. At the top of the screen click the "N payee" button indicating the total payees selected and click "Category learning".'}),"\n",(0,o.jsx)(t.h3,{id:"disabling-all-automatic-rule-creation",children:"Disabling All Automatic Rule Creation"}),"\n",(0,o.jsx)(t.p,{children:'To disable automatic rule creation for all payees, disable category learning by going to More > Payees > "Category learning settings"\u2026 at the bottom of the screen. Disabling category learning will not delete any existing rules but will prevent new rules from being created automatically on a global level.'}),"\n",(0,o.jsx)(t.h2,{id:"using-the-rule-editor-for-sophisticated-batch-editing",children:"Using the Rule Editor for Sophisticated Batch Editing"}),"\n",(0,o.jsx)(t.p,{children:'This deserves its own section because this turned out to be a surprising use case. Because the rule editor shows you a list of transactions that match the conditions, and allows you to manually apply actions to some or all of them, it turns out to be a great "batch editor".'}),"\n",(0,o.jsx)(t.p,{children:"That means if you need to do a lot of work across many transactions at once, you should try the rule editor. While you can select individual transactions in the account screen and quickly change any one field, that is more targeted to changing one field across a small number of transactions. In the rule editor, you can apply any number of actions at once and get a clear view of what transactions are changing."}),"\n",(0,o.jsx)(t.p,{children:"To do this go to More > Rules\u2026 and click \"Create new rule\". You won't be actually creating a new rule, but you'll have the rule editor at your disposal for quick bulk editing."})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},71184:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>l});var n=a(14041);const o={},i=n.createContext(o);function s(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);