"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6039],{58306:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>x,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"experimental/rule-templating","title":"Rule Action Templating","description":"This is an experimental feature. That means we\'re still working on finishing it. There may be bugs, missing functionality or incomplete documentation, and we may decide to remove the feature in a future release. If you have any feedback, please open an issue or post a message in the Discord.","source":"@site/docs/experimental/rule-templating.md","sourceDirName":"experimental","slug":"/experimental/rule-templating","permalink":"/docs/experimental/rule-templating","draft":false,"unlisted":false,"editUrl":"https://github.com/actualbudget/actual/tree/master/packages/docs/docs/experimental/rule-templating.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"End of Month Cleanup","permalink":"/docs/experimental/monthly-cleanup"},"next":{"title":"Pluggy.ai Setup","permalink":"/docs/experimental/pluggyai"}}');var d=n(31085),r=n(71184);const i={},l="Rule Action Templating",a={},c=[{value:"Using rule action templating",id:"using-rule-action-templating",level:2},{value:"Variables",id:"variables",level:2},{value:"Functions",id:"functions",level:2},{value:"Mathematical",id:"mathematical",level:3},{value:"Text",id:"text",level:3},{value:"Date",id:"date",level:3},{value:"Other",id:"other",level:3}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.header,{children:(0,d.jsx)(t.h1,{id:"rule-action-templating",children:"Rule Action Templating"})}),"\n",(0,d.jsx)(t.admonition,{type:"warning",children:(0,d.jsxs)(t.p,{children:["This is an ",(0,d.jsx)(t.strong,{children:"experimental feature"}),". That means we're still working on finishing it. There may be bugs, missing functionality or incomplete documentation, and we may decide to remove the feature in a future release. If you have any feedback, please ",(0,d.jsx)(t.a,{href:"https://github.com/actualbudget/actual/issues",children:"open an issue"})," or post a message in the Discord."]})}),"\n",(0,d.jsx)(t.admonition,{type:"warning",children:(0,d.jsxs)(t.p,{children:["All functionality described here may not be available in the latest stable release. See ",(0,d.jsx)(t.a,{href:"/docs/experimental/",children:"Experimental Features"})," for instructions to enable experimental features. Use the ",(0,d.jsx)(t.code,{children:"edge"})," images for the latest implementation."]})}),"\n",(0,d.jsx)(t.p,{children:"Rule action templating allows rules to dynamically set fields based on transaction data via meta programming inside the rule."}),"\n",(0,d.jsx)(t.p,{children:"Setting the following fields with a rule template is currently supported:"}),"\n",(0,d.jsxs)(t.ul,{children:["\n",(0,d.jsx)(t.li,{children:"notes"}),"\n",(0,d.jsx)(t.li,{children:"date"}),"\n",(0,d.jsx)(t.li,{children:"amount"}),"\n",(0,d.jsx)(t.li,{children:"payee (name)"}),"\n",(0,d.jsx)(t.li,{children:"cleared (although no boolean helper functions are currently supported)"}),"\n"]}),"\n",(0,d.jsxs)(t.p,{children:["Actual uses ",(0,d.jsx)(t.a,{href:"https://handlebarsjs.com/",children:"handlebars"})," under the hood to process the rule templates. You can find more in depth information about how this works in ",(0,d.jsx)(t.a,{href:"https://handlebarsjs.com/guide",children:"their guide"}),"."]}),"\n",(0,d.jsx)(t.h2,{id:"using-rule-action-templating",children:"Using rule action templating"}),"\n",(0,d.jsx)(t.p,{children:"You can toggle between the normal and template input modes by clicking the icon to the right of the action input box."}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{alt:"How to enable rule action templating",src:n(72308).A+"",width:"1830",height:"720"})}),"\n",(0,d.jsx)(t.p,{children:'When the template input mode is active you can type your template into the input box as below. This example removes the string " 12345" from an imported payee and sets the payee to this new value.'}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{alt:"How to enable rule action templating 2",src:n(75233).A+"",width:"1826",height:"714"})}),"\n",(0,d.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Variable"}),(0,d.jsx)(t.th,{children:"Type"}),(0,d.jsx)(t.th,{children:"Notes"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"today"}),(0,d.jsx)(t.td,{children:"date"}),(0,d.jsx)(t.td,{children:"Today's date"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"account"}),(0,d.jsx)(t.td,{children:"id"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"balance"}),(0,d.jsx)(t.td,{children:"number"}),(0,d.jsx)(t.td,{children:"Balance of account as of the date of the transaction, excluding the transaction amount, stored without decimal"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"date"}),(0,d.jsx)(t.td,{children:"date"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"payee"}),(0,d.jsx)(t.td,{children:"id"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"payee_name"}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"imported_payee"}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"notes"}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"amount"}),(0,d.jsx)(t.td,{children:"number"}),(0,d.jsxs)(t.td,{children:["This is stored without the decimal place. ie. 152 will be 15200. ",(0,d.jsx)(t.code,{children:"{{div amount 100}}"})," can be used to convert back"]})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"cleared"}),(0,d.jsx)(t.td,{children:"boolean"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"reconciled"}),(0,d.jsx)(t.td,{children:"boolean"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"imported_id"}),(0,d.jsx)(t.td,{children:"id"}),(0,d.jsx)(t.td,{children:"ID of the transaction provided from an import source (eg. bank sync/QFX)"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"is_child"}),(0,d.jsx)(t.td,{children:"boolean"}),(0,d.jsx)(t.td,{children:"Flag for children in a split transaction"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"is_parent"}),(0,d.jsx)(t.td,{children:"boolean"}),(0,d.jsx)(t.td,{children:"Flag for the parent of a split transaction"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"parent_id"}),(0,d.jsx)(t.td,{children:"id"}),(0,d.jsx)(t.td,{children:"Set if is_child = true"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"schedule"}),(0,d.jsx)(t.td,{children:"id"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"starting_balance_flag"}),(0,d.jsx)(t.td,{children:"boolean"}),(0,d.jsx)(t.td,{children:"Set if the transaction is a starting balance transaction"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"transfer_id"}),(0,d.jsx)(t.td,{children:"id"}),(0,d.jsx)(t.td,{})]})]})]}),"\n",(0,d.jsx)(t.h2,{id:"functions",children:"Functions"}),"\n",(0,d.jsx)(t.h3,{id:"mathematical",children:"Mathematical"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Function"}),(0,d.jsx)(t.th,{children:"Arguments"}),(0,d.jsx)(t.th,{children:"Notes"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"add"}),(0,d.jsx)(t.td,{children:"number1, number2..."}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"sub"}),(0,d.jsx)(t.td,{children:"number1, number2..."}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"div"}),(0,d.jsx)(t.td,{children:"number1, number2..."}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"mul"}),(0,d.jsx)(t.td,{children:"number1, number2..."}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"mod"}),(0,d.jsx)(t.td,{children:"number1, number2..."}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"floor"}),(0,d.jsx)(t.td,{children:"number"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"ceil"}),(0,d.jsx)(t.td,{children:"number"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"round"}),(0,d.jsx)(t.td,{children:"number"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"abs"}),(0,d.jsx)(t.td,{children:"number"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"min"}),(0,d.jsx)(t.td,{children:"number1, number2..."}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"max"}),(0,d.jsx)(t.td,{children:"number1, number2..."}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"fixed"}),(0,d.jsx)(t.td,{children:"number1, number2..."}),(0,d.jsx)(t.td,{})]})]})]}),"\n",(0,d.jsx)(t.h3,{id:"text",children:"Text"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Function"}),(0,d.jsx)(t.th,{children:"Arguments"}),(0,d.jsx)(t.th,{children:"Notes"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"regex"}),(0,d.jsx)(t.td,{children:"value, regex, replacement"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"replace"}),(0,d.jsx)(t.td,{children:"value, pattern, replacement"}),(0,d.jsxs)(t.td,{children:["Mimics js replace. When pattern is not as /regex/flags it just uses raw value as opposed to ",(0,d.jsx)(t.code,{children:"{{regex ..."})]})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"replaceAll"}),(0,d.jsx)(t.td,{children:"value, pattern, replacement"}),(0,d.jsxs)(t.td,{children:["Mimics js replaceAll. When pattern is not as /regex/flags it just uses raw value as opposed to ",(0,d.jsx)(t.code,{children:"{{regex ..."})]})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"concat"}),(0,d.jsx)(t.td,{children:"values..."}),(0,d.jsx)(t.td,{children:"Joins all arguments together"})]})]})]}),"\n",(0,d.jsx)(t.h3,{id:"date",children:"Date"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Function"}),(0,d.jsx)(t.th,{children:"Arguments"}),(0,d.jsx)(t.th,{children:"Notes"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"addDays"}),(0,d.jsx)(t.td,{children:"date, number"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"subDays"}),(0,d.jsx)(t.td,{children:"date, number"}),(0,d.jsx)(t.td,{children:"Subtract days from date"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"addWeeks"}),(0,d.jsx)(t.td,{children:"date, number"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"subWeeks"}),(0,d.jsx)(t.td,{children:"date, number"}),(0,d.jsx)(t.td,{children:"Subtract weeks from date"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"addMonths"}),(0,d.jsx)(t.td,{children:"date, number"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"subMonths"}),(0,d.jsx)(t.td,{children:"date, number"}),(0,d.jsx)(t.td,{children:"Subtract months from date"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"addYears"}),(0,d.jsx)(t.td,{children:"date, number"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"subYears"}),(0,d.jsx)(t.td,{children:"date, number"}),(0,d.jsx)(t.td,{children:"Subtract years from date"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"setDay"}),(0,d.jsx)(t.td,{children:"date, day"}),(0,d.jsx)(t.td,{children:"Overflows are handled, 0 will set to last day of month before"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"day"}),(0,d.jsx)(t.td,{children:"date"}),(0,d.jsx)(t.td,{children:"Extract the day from a date"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"month"}),(0,d.jsx)(t.td,{children:"date"}),(0,d.jsx)(t.td,{children:"Extract the month from a date"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"year"}),(0,d.jsx)(t.td,{children:"date"}),(0,d.jsx)(t.td,{children:"Extract the year from a date"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"format"}),(0,d.jsx)(t.td,{children:"date, format"}),(0,d.jsxs)(t.td,{children:["See ",(0,d.jsx)(t.a,{href:"https://date-fns.org/v4.1.0/docs/format",children:"date-fns docs"})," for patterns"]})]})]})]}),"\n",(0,d.jsx)(t.h3,{id:"other",children:"Other"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Function"}),(0,d.jsx)(t.th,{children:"Arguments"}),(0,d.jsx)(t.th,{children:"Notes"})]})}),(0,d.jsx)(t.tbody,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"debug"}),(0,d.jsx)(t.td,{children:"any"}),(0,d.jsx)(t.td,{children:"Prints the arguments to the browser development console"})]})})]})]})}function x(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,d.jsx)(t,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}},71184:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var s=n(14041);const d={},r=s.createContext(d);function i(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),s.createElement(r.Provider,{value:t},e.children)}},72308:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/enable-rule-templating-9bc716505780bd9ffc4dac55b13481fe.png"},75233:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/enable-rule-templating-2-ae0137ef253efbad065ad86797011547.png"}}]);