"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[127],{52189:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"contributing/code-style","title":"Code Style and Conventions","description":"This guide outlines the coding conventions and style guidelines for contributing to Actual Budget. Following these guidelines helps maintain consistency and code quality across the codebase.","source":"@site/docs/contributing/code-style.md","sourceDirName":"contributing","slug":"/contributing/code-style","permalink":"/docs/contributing/code-style","draft":false,"unlisted":false,"editUrl":"https://github.com/actualbudget/actual/tree/master/packages/docs/docs/contributing/code-style.md","tags":[],"version":"current","frontMatter":{"title":"Code Style and Conventions"},"sidebar":"docs","previous":{"title":"Testing","permalink":"/docs/contributing/testing"},"next":{"title":"Troubleshooting","permalink":"/docs/contributing/troubleshooting"}}');var t=s(31085),r=s(71184);const o={title:"Code Style and Conventions"},c=void 0,l={},d=[{value:"TypeScript Guidelines",id:"typescript-guidelines",level:2},{value:"Type Usage",id:"type-usage",level:3},{value:"Naming Conventions",id:"naming-conventions",level:3},{value:"Code Structure",id:"code-structure",level:3},{value:"React Patterns",id:"react-patterns",level:2},{value:"Component Definition",id:"component-definition",level:3},{value:"Component Example",id:"component-example",level:3},{value:"Custom Hooks",id:"custom-hooks",level:3},{value:"Other React Guidelines",id:"other-react-guidelines",level:3},{value:"JSX Style",id:"jsx-style",level:3},{value:"Platform-Specific Code",id:"platform-specific-code",level:2},{value:"Restricted Patterns",id:"restricted-patterns",level:2},{value:"Never Use",id:"never-use",level:3},{value:"File Structure Patterns",id:"file-structure-patterns",level:2},{value:"Component File Structure",id:"component-file-structure",level:3},{value:"Test File Structure",id:"test-file-structure",level:3},{value:"Internationalization (i18n)",id:"internationalization-i18n",level:2},{value:"Code Quality Checklist",id:"code-quality-checklist",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This guide outlines the coding conventions and style guidelines for contributing to Actual Budget. Following these guidelines helps maintain consistency and code quality across the codebase."}),"\n",(0,t.jsx)(n.h2,{id:"typescript-guidelines",children:"TypeScript Guidelines"}),"\n",(0,t.jsx)(n.h3,{id:"type-usage",children:"Type Usage"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use TypeScript for all code"}),": All new code should be written in TypeScript"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Prefer ",(0,t.jsx)(n.code,{children:"type"})," over ",(0,t.jsx)(n.code,{children:"interface"})]}),": Use type aliases instead of interfaces when possible"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Avoid ",(0,t.jsx)(n.code,{children:"enum"})]}),": Use objects or maps instead of enums"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Avoid ",(0,t.jsx)(n.code,{children:"any"})," or ",(0,t.jsx)(n.code,{children:"unknown"})]}),": Only use when absolutely necessary"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Look for existing types"}),": Check ",(0,t.jsx)(n.code,{children:"packages/loot-core/src/types/"})," for existing type definitions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Avoid type assertions"}),": Prefer ",(0,t.jsx)(n.code,{children:"satisfies"})," over ",(0,t.jsx)(n.code,{children:"as"})," or ",(0,t.jsx)(n.code,{children:"!"})," for type narrowing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use inline type imports"}),": ",(0,t.jsx)(n.code,{children:"import { type MyType } from '...'"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Descriptive variable names"}),": Use auxiliary verbs for boolean variables (e.g., ",(0,t.jsx)(n.code,{children:"isLoaded"}),", ",(0,t.jsx)(n.code,{children:"hasError"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Named exports"}),": Use named exports for components and utilities (avoid default exports except in specific cases)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"code-structure",children:"Code Structure"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Functional programming"}),": Prefer functional and declarative programming patterns - avoid classes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Pure functions"}),": Use the ",(0,t.jsx)(n.code,{children:"function"})," keyword for pure functions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Modularization"}),": Prefer iteration and modularization over code duplication"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"File structure"}),": Structure files as: exported component/page, helpers, static content, types"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Component files"}),": Create new components in their own files"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"react-patterns",children:"React Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"component-definition",children:"Component Definition"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Don't use ",(0,t.jsx)(n.code,{children:"React.FunctionComponent"})," or ",(0,t.jsx)(n.code,{children:"React.FC"})]}),": Type props directly"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Don't use ",(0,t.jsx)(n.code,{children:"React.*"})," patterns"]}),": Use named imports instead (e.g., ",(0,t.jsx)(n.code,{children:"import { useState } from 'react'"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"component-example",children:"Component Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { type ComponentType } from 'react';\n// ... other imports\n\ntype MyComponentProps = {\n  prop1: string;\n  prop2: number;\n};\n\nexport function MyComponent({ prop1, prop2 }: MyComponentProps) {\n  // Component logic\n  return (\n    // JSX\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"custom-hooks",children:"Custom Hooks"}),"\n",(0,t.jsxs)(n.p,{children:["Use custom hooks from ",(0,t.jsx)(n.code,{children:"src/hooks"})," instead of importing directly from react-router or react-redux:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useNavigate()"})," from ",(0,t.jsx)(n.code,{children:"src/hooks"})," (not react-router)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useDispatch()"}),", ",(0,t.jsx)(n.code,{children:"useSelector()"}),", ",(0,t.jsx)(n.code,{children:"useStore()"})," from ",(0,t.jsx)(n.code,{children:"src/redux"})," (not react-redux)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"other-react-guidelines",children:"Other React Guidelines"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Avoid unstable nested components"}),": Don't define components inside other components"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Use ",(0,t.jsx)(n.code,{children:"satisfies"})," for type narrowing"]}),": Prefer ",(0,t.jsx)(n.code,{children:"satisfies"})," over type assertions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Use ",(0,t.jsx)(n.code,{children:"<Link>"})," instead of ",(0,t.jsx)(n.code,{children:"<a>"})," tags"]}),": For internal navigation"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"jsx-style",children:"JSX Style"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Declarative JSX"}),": Keep JSX minimal and readable"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Avoid unnecessary curly braces"}),": In conditionals when not needed"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Concise syntax"}),": Use concise syntax for simple statements"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Explicit expressions"}),": Prefer explicit expressions (",(0,t.jsx)(n.code,{children:"condition && <Component />"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"platform-specific-code",children:"Platform-Specific Code"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Don't directly reference platform-specific imports"}),": Avoid importing ",(0,t.jsx)(n.code,{children:".api"}),", ",(0,t.jsx)(n.code,{children:".web"}),", or ",(0,t.jsx)(n.code,{children:".electron"})," directly"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use conditional exports"}),": Use conditional exports in ",(0,t.jsx)(n.code,{children:"loot-core"})," for platform-specific code"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Build-time resolution"}),": Platform resolution happens at build time via package.json exports"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"restricted-patterns",children:"Restricted Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"never-use",children:"Never Use"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"uuid"})," without destructuring"]}),": Use ",(0,t.jsx)(n.code,{children:"import { v4 as uuidv4 } from 'uuid'"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Direct color imports"}),": Use theme instead of importing colors directly"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"@actual-app/web/*"})," imports in ",(0,t.jsx)(n.code,{children:"loot-core"})]}),": Don't import from web package in core"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"file-structure-patterns",children:"File Structure Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"component-file-structure",children:"Component File Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { type ComponentType } from 'react';\n// ... other imports\n\ntype MyComponentProps = {\n  // Props definition\n};\n\nexport function MyComponent({ prop1, prop2 }: MyComponentProps) {\n  // Component logic\n  return (\n    // JSX\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"test-file-structure",children:"Test File Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { describe, it, expect, beforeEach } from 'vitest';\n// ... imports\n\ndescribe('ComponentName', () => {\n  it('should behave as expected', () => {\n    // Test logic\n    expect(result).toBe(expected);\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"internationalization-i18n",children:"Internationalization (i18n)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Use ",(0,t.jsx)(n.code,{children:"Trans"})," component"]}),": Prefer ",(0,t.jsx)(n.code,{children:"Trans"})," component instead of ",(0,t.jsx)(n.code,{children:"t()"})," function when possible"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Translate all user-facing strings"}),": All user-facing strings must be translated"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Generate i18n files"}),": Run ",(0,t.jsx)(n.code,{children:"yarn generate:i18n"})," to generate translation files"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ESLint enforcement"}),": Custom ESLint rules enforce translation usage"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"code-quality-checklist",children:"Code Quality Checklist"}),"\n",(0,t.jsx)(n.p,{children:"Before committing changes, ensure:"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(n.code,{children:"yarn typecheck"})," passes"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(n.code,{children:"yarn lint:fix"})," has been run"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Relevant tests pass"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","User-facing strings are translated"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Prefer ",(0,t.jsx)(n.code,{children:"type"})," over ",(0,t.jsx)(n.code,{children:"interface"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/",children:"TypeScript Handbook"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://react.dev/",children:"React Documentation"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/contributing/project-details/architecture",children:"ESLint Configuration"})," - See project structure for ESLint setup"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},71184:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var i=s(14041);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);